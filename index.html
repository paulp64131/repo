<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClickCal Event Creator</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 17 -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
</head>
<body class="bg-gray-100">
  <div id="root"></div>
  <script>
    const { useState, useEffect } = React;

    function App() {
      const [title, setTitle] = useState('');
      const [startDate, setStartDate] = useState('');
      const [startTime, setStartTime] = useState('');
      const [endDate, setEndDate] = useState('');
      const [endTime, setEndTime] = useState('');
      const [location, setLocation] = useState('');
      const [description, setDescription] = useState('');
      const [includeZoom, setIncludeZoom] = useState(false);
      const [message, setMessage] = useState('');

      var ZOOM_LINK = 'https://us04web.zoom.us/j/71280888309?pwd=sWykxtaRigTGbe6fBFauqfDCHmR45g.1';

      // Auto-update location when Zoom is toggled
      useEffect(function() {
        if (includeZoom) {
          if (location.indexOf(ZOOM_LINK) === -1) {
            setLocation(location ? location + " | Zoom: " + ZOOM_LINK : "Zoom: " + ZOOM_LINK);
          }
        } else {
          if (location.indexOf(ZOOM_LINK) !== -1) {
            setLocation(location.replace(" | Zoom: " + ZOOM_LINK, "").replace("Zoom: " + ZOOM_LINK, "").trim());
          }
        }
      }, [includeZoom]);

      function formatDateTime(date, time) {
        if (!date || !time) return '';
        var dt = new Date(date + "T" + time);
        return dt.toISOString().replace(/[-:]/g, '').replace(/\.\d{3}/, '');
      }

      function buildGoogleLink() {
        var start = formatDateTime(startDate, startTime);
        var end = formatDateTime(endDate, endTime);
        if (!start || !end || title === '') {
          return '';
        }
        var params = new URLSearchParams();
        params.set('action', 'TEMPLATE');
        params.set('text', title);
        params.set('dates', start + '/' + end);
        if (location !== '') {
          params.set('location', location);
        }
        if (description !== '') {
          params.set('details', description);
        }
        return 'https://calendar.google.com/calendar/render?' + params.toString();
      }

      function copyLink() {
        var link = buildGoogleLink();
        if (!link) {
          setMessage('Please fill in all required fields.');
          return;
        }
        navigator.clipboard.writeText(link);
        setMessage('Copied link to clipboard!');
      }

      var googleLink = buildGoogleLink();
      var isComplete = title && startDate && startTime && endDate && endTime;

      return React.createElement('div', { className: 'max-w-md mx-auto mt-10 bg-white shadow p-6 rounded' },
        React.createElement('h1', { className: 'text-2xl font-bold mb-4' }, 'ðŸ“… Create Calendar Event'),

        // Title
        React.createElement('input', {
          className: 'w-full border p-2 mb-3',
          placeholder: 'Event Title *',
          value: title,
          onChange: function(e) { setTitle(e.target.value); }
        }),

        // Start Date/Time
        React.createElement('div', { className: 'grid grid-cols-2 gap-2 mb-3' },
          React.createElement('input', {
            type: 'date',
            className: 'border p-2',
            value: startDate,
            onChange: function(e) { setStartDate(e.target.value); }
          }),
          React.createElement('input', {
            type: 'time',
            className: 'border p-2',
            value: startTime,
            onChange: function(e) { setStartTime(e.target.value); }
          })
        ),

        // End Date/Time
        React.createElement('div', { className: 'grid grid-cols-2 gap-2 mb-3' },
          React.createElement('input', {
            type: 'date',
            className: 'border p-2',
            value: endDate,
            onChange: function(e) { setEndDate(e.target.value); }
          }),
          React.createElement('input', {
            type: 'time',
            className: 'border p-2',
            value: endTime,
            onChange: function(e) { setEndTime(e.target.value); }
          })
        ),

        // Zoom Toggle
        React.createElement('label', { className: 'flex items-center mb-3' },
          React.createElement('input', {
            type: 'checkbox',
            checked: includeZoom,
            onChange: function(e) { setIncludeZoom(e.target.checked); }
          }),
          React.createElement('span', { className: 'ml-2' }, 'Include Zoom Link')
        ),

        // Location
        React.createElement('input', {
          className: 'w-full border p-2 mb-3',
          placeholder: 'Location',
          value: location,
          onChange: function(e) { setLocation(e.target.value); }
        }),

        // Description
        React.createElement('textarea', {
          className: 'w-full border p-2 mb-3',
          placeholder: 'Description',
          rows: 2,
          value: description,
          onChange: function(e) { setDescription(e.target.value); }
        }),

        // Button
        React.createElement('button', {
          className: 'w-full bg-blue-600 text-white p-2 rounded disabled:opacity-50',
          disabled: !isComplete,
          onClick: copyLink
        }, 'Copy Google Calendar Link'),

        // Preview Link
        googleLink && React.createElement('div', { className: 'mt-3' },
          React.createElement('a', {
            href: googleLink,
            target: '_blank',
            className: 'text-blue-600 underline'
          }, 'Preview Calendar Link')
        ),

        // Message
        message && React.createElement('p', { className: 'mt-3 text-green-600' }, message)
      );
    }

    ReactDOM.render(
      React.createElement(App),
      document.getElementById('root')
    );
  </script>
</body>
</html>