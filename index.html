<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClickCal - Event Creator</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 17 UMD -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
</head>
<body class="bg-gray-50">
  <div id="root"></div>
  <script>
    const { useState } = React;

    function App() {
      const [eventData, setEventData] = useState({
        title: "",
        startDate: "",
        startTime: "",
        endDate: "",
        endTime: ""
      });
      const [toastMessage, setToastMessage] = useState("");
      const [showToast, setShowToast] = useState(false);

      function updateField(field, value) {
        setEventData((prev) => ({ ...prev, [field]: value }));
      }

      function formatDateTime(date, time) {
        if (!date || !time) return "";
        const dt = new Date(\`\${date}T\${time}\`);
        return dt.toISOString().replace(/[-:]/g, "").replace(/\\.\\d{3}/, "");
      }

      function createGoogleUrl() {
        const start = formatDateTime(eventData.startDate, eventData.startTime);
        const end = formatDateTime(eventData.endDate, eventData.endTime);
        const params = new URLSearchParams({
          action: "TEMPLATE",
          text: eventData.title,
          dates: \`\${start}/\${end}\`
        });
        return \`https://calendar.google.com/calendar/render?\${params}\`;
      }

      async function copyLink() {
        const url = createGoogleUrl();
        if (!url) {
          setToastMessage("Please fill in all fields.");
          setShowToast(true);
          setTimeout(() => setShowToast(false), 3000);
          return;
        }
        try {
          await navigator.clipboard.writeText(url);
          setToastMessage("Link copied to clipboard!");
        } catch {
          setToastMessage("Copy failed. Select manually.");
        }
        setShowToast(true);
        setTimeout(() => setShowToast(false), 3000);
      }

      const isComplete = eventData.title && eventData.startDate && eventData.startTime && eventData.endDate && eventData.endTime;

      return React.createElement(
        "div",
        { className: "max-w-md mx-auto p-6 bg-white shadow rounded mt-10" },
        React.createElement("h1", { className: "text-2xl font-bold mb-4" }, "ðŸ“… Create Event Link"),
        React.createElement("input", {
          className: "border w-full p-2 mb-3",
          placeholder: "Event Title",
          value: eventData.title,
          onChange: (e) => updateField("title", e.target.value)
        }),
        React.createElement("div", { className: "grid grid-cols-2 gap-2 mb-3" },
          React.createElement("input", {
            className: "border p-2",
            type: "date",
            value: eventData.startDate,
            onChange: (e) => updateField("startDate", e.target.value)
          }),
          React.createElement("input", {
            className: "border p-2",
            type: "time",
            value: eventData.startTime,
            onChange: (e) => updateField("startTime", e.target.value)
          })
        ),
        React.createElement("div", { className: "grid grid-cols-2 gap-2 mb-4" },
          React.createElement("input", {
            className: "border p-2",
            type: "date",
            value: eventData.endDate,
            onChange: (e) => updateField("endDate", e.target.value)
          }),
          React.createElement("input", {
            className: "border p-2",
            type: "time",
            value: eventData.endTime,
            onChange: (e) => updateField("endTime", e.target.value)
          })
        ),
        React.createElement("button", {
          className: \`w-full p-2 rounded text-white \${isComplete ? "bg-blue-600 hover:bg-blue-700" : "bg-gray-400 cursor-not-allowed"}\`,
          disabled: !isComplete,
          onClick: copyLink
        }, "Copy Google Calendar Link"),
        showToast && React.createElement("div", {
          className: "mt-4 p-2 bg-green-500 text-white text-center rounded"
        }, toastMessage)
      );
    }

    ReactDOM.render(
      React.createElement(App),
      document.getElementById("root")
    );
  </script>
</body>
</html>